<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="data:text/css;charset=utf-8,%0A%40font%2Dface%20%7B%0Afont%2Dfamily%3A%20octicons%2Dlink%3B%0Asrc%3A%20url%28data%3Afont%2Fwoff%3Bcharset%3Dutf%2D8%3Bbase64%2Cd09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM%2B8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB%2FaFGpk3jaTY6xa8JAGMW%2FO62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v%2Bk%2F0an2i%2BitHDw3v2%2B9%2BDBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3%2FI7AtxEJLtzzuZfI%2BVVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy%2FLt7Kc%2B0vWY%2FgAgIIEqAN9we0pwKXreiMasxvabDQMM4riO%2BqxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw%2Bymhce7vwM9jSqO8JyVd5RH9gyTt2%2BJ%2FyUmYlIR0s04n6%2B7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv%2FocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi%2BW2%2BMjCzMIDApSwvXzC97Z4Ig8N%2FBxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh%2F8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT%2BAEjAwuDFpBmA9KMDEwMCh9i%2Fv8H8sH0%2F4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9%2FlqYwOGZxeUelN2U2R6%2BcArgtCJpauW7UQBqnFkUsjAY%2FkOU1cP%2BDAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl%2BvvmM%2FbyA48e6tWrKArm4ZJlCbdsrxksL1AwWn%2FyBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO%2F%2FsdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd%2F89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF%2B9JOS0nbaaYDCQfwCJ7Au3AHj%2BLO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm%2BEBXuAbHmIMSRMs%2B4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL%2BhD7C1xoaHeLJSEao0FEW14ckxC%2BTU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13%2F%2Blm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl%2B9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O%2FAdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB%2F%2F%2FAA8AAQAAAAAAAAAAAAAAAAABAAAAAA%3D%3D%29%20format%28%27woff%27%29%3B%0A%7D%0Abody%20%7B%0A%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0Atext%2Dsize%2Dadjust%3A%20100%25%3B%0Acolor%3A%20%23333%3B%0Afont%2Dfamily%3A%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20%22Segoe%20UI%22%2C%20Arial%2C%20freesans%2C%20sans%2Dserif%2C%20%22Apple%20Color%20Emoji%22%2C%20%22Segoe%20UI%20Emoji%22%2C%20%22Segoe%20UI%20Symbol%22%3B%0Afont%2Dsize%3A%2016px%3B%0Aline%2Dheight%3A%201%2E6%3B%0Aword%2Dwrap%3A%20break%2Dword%3B%0A%7D%0Aa%20%7B%0Abackground%2Dcolor%3A%20transparent%3B%0A%7D%0Aa%3Aactive%2C%0Aa%3Ahover%20%7B%0Aoutline%3A%200%3B%0A%7D%0Astrong%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%202em%3B%0Amargin%3A%200%2E67em%200%3B%0A%7D%0Aimg%20%7B%0Aborder%3A%200%3B%0A%7D%0Ahr%20%7B%0Abox%2Dsizing%3A%20content%2Dbox%3B%0Aheight%3A%200%3B%0A%7D%0Apre%20%7B%0Aoverflow%3A%20auto%3B%0A%7D%0Acode%2C%0Akbd%2C%0Apre%20%7B%0Afont%2Dfamily%3A%20monospace%2C%20monospace%3B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ainput%20%7B%0Acolor%3A%20inherit%3B%0Afont%3A%20inherit%3B%0Amargin%3A%200%3B%0A%7D%0Ahtml%20input%5Bdisabled%5D%20%7B%0Acursor%3A%20default%3B%0A%7D%0Ainput%20%7B%0Aline%2Dheight%3A%20normal%3B%0A%7D%0Ainput%5Btype%3D%22checkbox%22%5D%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0Apadding%3A%200%3B%0A%7D%0Atable%20%7B%0Aborder%2Dcollapse%3A%20collapse%3B%0Aborder%2Dspacing%3A%200%3B%0A%7D%0Atd%2C%0Ath%20%7B%0Apadding%3A%200%3B%0A%7D%0A%2A%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0A%7D%0Ainput%20%7B%0Afont%3A%2013px%20%2F%201%2E4%20Helvetica%2C%20arial%2C%20nimbussansl%2C%20liberationsans%2C%20freesans%2C%20clean%2C%20sans%2Dserif%2C%20%22Apple%20Color%20Emoji%22%2C%20%22Segoe%20UI%20Emoji%22%2C%20%22Segoe%20UI%20Symbol%22%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%234078c0%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%2C%0Aa%3Aactive%20%7B%0Atext%2Ddecoration%3A%20underline%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%200%3B%0Amargin%3A%2015px%200%3B%0Aoverflow%3A%20hidden%3B%0Abackground%3A%20transparent%3B%0Aborder%3A%200%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%7D%0Ahr%3Abefore%20%7B%0Adisplay%3A%20table%3B%0Acontent%3A%20%22%22%3B%0A%7D%0Ahr%3Aafter%20%7B%0Adisplay%3A%20table%3B%0Aclear%3A%20both%3B%0Acontent%3A%20%22%22%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Amargin%2Dtop%3A%2015px%3B%0Amargin%2Dbottom%3A%2015px%3B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%2030px%3B%0A%7D%0Ah2%20%7B%0Afont%2Dsize%3A%2021px%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%2016px%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%2014px%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%2012px%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%2011px%3B%0A%7D%0Ablockquote%20%7B%0Amargin%3A%200%3B%0A%7D%0Aul%2C%0Aol%20%7B%0Apadding%3A%200%3B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Aol%20ol%2C%0Aul%20ol%20%7B%0Alist%2Dstyle%2Dtype%3A%20lower%2Droman%3B%0A%7D%0Aul%20ul%20ol%2C%0Aul%20ol%20ol%2C%0Aol%20ul%20ol%2C%0Aol%20ol%20ol%20%7B%0Alist%2Dstyle%2Dtype%3A%20lower%2Dalpha%3B%0A%7D%0Add%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0Afont%2Dsize%3A%2012px%3B%0A%7D%0Apre%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0Afont%3A%2012px%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0A%7D%0A%2Eselect%3A%3A%2Dms%2Dexpand%20%7B%0Aopacity%3A%200%3B%0A%7D%0A%2Eocticon%20%7B%0Afont%3A%20normal%20normal%20normal%2016px%2F1%20octicons%2Dlink%3B%0Adisplay%3A%20inline%2Dblock%3B%0Atext%2Ddecoration%3A%20none%3B%0Atext%2Drendering%3A%20auto%3B%0A%2Dwebkit%2Dfont%2Dsmoothing%3A%20antialiased%3B%0A%2Dmoz%2Dosx%2Dfont%2Dsmoothing%3A%20grayscale%3B%0A%2Dwebkit%2Duser%2Dselect%3A%20none%3B%0A%2Dmoz%2Duser%2Dselect%3A%20none%3B%0A%2Dms%2Duser%2Dselect%3A%20none%3B%0Auser%2Dselect%3A%20none%3B%0A%7D%0A%2Eocticon%2Dlink%3Abefore%20%7B%0Acontent%3A%20%27%5Cf05c%27%3B%0A%7D%0A%2Emarkdown%2Dbody%3Abefore%20%7B%0Adisplay%3A%20table%3B%0Acontent%3A%20%22%22%3B%0A%7D%0A%2Emarkdown%2Dbody%3Aafter%20%7B%0Adisplay%3A%20table%3B%0Aclear%3A%20both%3B%0Acontent%3A%20%22%22%3B%0A%7D%0A%2Emarkdown%2Dbody%3E%2A%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%20%21important%3B%0A%7D%0A%2Emarkdown%2Dbody%3E%2A%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%20%21important%3B%0A%7D%0Aa%3Anot%28%5Bhref%5D%29%20%7B%0Acolor%3A%20inherit%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0A%2Eanchor%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%2Dright%3A%202px%3B%0Amargin%2Dleft%3A%20%2D18px%3B%0A%7D%0A%2Eanchor%3Afocus%20%7B%0Aoutline%3A%20none%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Amargin%2Dtop%3A%201em%3B%0Amargin%2Dbottom%3A%2016px%3B%0Afont%2Dweight%3A%20bold%3B%0Aline%2Dheight%3A%201%2E4%3B%0A%7D%0Ah1%20%2Eocticon%2Dlink%2C%0Ah2%20%2Eocticon%2Dlink%2C%0Ah3%20%2Eocticon%2Dlink%2C%0Ah4%20%2Eocticon%2Dlink%2C%0Ah5%20%2Eocticon%2Dlink%2C%0Ah6%20%2Eocticon%2Dlink%20%7B%0Acolor%3A%20%23000%3B%0Avertical%2Dalign%3A%20middle%3B%0Avisibility%3A%20hidden%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%2C%0Ah2%3Ahover%20%2Eanchor%2C%0Ah3%3Ahover%20%2Eanchor%2C%0Ah4%3Ahover%20%2Eanchor%2C%0Ah5%3Ahover%20%2Eanchor%2C%0Ah6%3Ahover%20%2Eanchor%20%7B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah2%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah3%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah4%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah5%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah6%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%20%7B%0Avisibility%3A%20visible%3B%0A%7D%0Ah1%20%7B%0Apadding%2Dbottom%3A%200%2E3em%3B%0Afont%2Dsize%3A%202%2E25em%3B%0Aline%2Dheight%3A%201%2E2%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah1%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%3B%0A%7D%0Ah2%20%7B%0Apadding%2Dbottom%3A%200%2E3em%3B%0Afont%2Dsize%3A%201%2E75em%3B%0Aline%2Dheight%3A%201%2E225%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah2%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E5em%3B%0Aline%2Dheight%3A%201%2E43%3B%0A%7D%0Ah3%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E2%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%201%2E25em%3B%0A%7D%0Ah4%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E2%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ah5%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%201em%3B%0Acolor%3A%20%23777%3B%0A%7D%0Ah6%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ap%2C%0Ablockquote%2C%0Aul%2C%0Aol%2C%0Adl%2C%0Atable%2C%0Apre%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%204px%3B%0Apadding%3A%200%3B%0Amargin%3A%2016px%200%3B%0Abackground%2Dcolor%3A%20%23e7e7e7%3B%0Aborder%3A%200%20none%3B%0A%7D%0Aul%2C%0Aol%20%7B%0Apadding%2Dleft%3A%202em%3B%0A%7D%0Aul%20ul%2C%0Aul%20ol%2C%0Aol%20ol%2C%0Aol%20ul%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Ali%3Ep%20%7B%0Amargin%2Dtop%3A%2016px%3B%0A%7D%0Adl%20%7B%0Apadding%3A%200%3B%0A%7D%0Adl%20dt%20%7B%0Apadding%3A%200%3B%0Amargin%2Dtop%3A%2016px%3B%0Afont%2Dsize%3A%201em%3B%0Afont%2Dstyle%3A%20italic%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adl%20dd%20%7B%0Apadding%3A%200%2016px%3B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0Ablockquote%20%7B%0Apadding%3A%200%2015px%3B%0Acolor%3A%20%23777%3B%0Aborder%2Dleft%3A%204px%20solid%20%23ddd%3B%0A%7D%0Ablockquote%3E%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Ablockquote%3E%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Atable%20%7B%0Adisplay%3A%20block%3B%0Awidth%3A%20100%25%3B%0Aoverflow%3A%20auto%3B%0Aword%2Dbreak%3A%20normal%3B%0Aword%2Dbreak%3A%20keep%2Dall%3B%0A%7D%0Atable%20th%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Atable%20th%2C%0Atable%20td%20%7B%0Apadding%3A%206px%2013px%3B%0Aborder%3A%201px%20solid%20%23ddd%3B%0A%7D%0Atable%20tr%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Aborder%2Dtop%3A%201px%20solid%20%23ccc%3B%0A%7D%0Atable%20tr%3Anth%2Dchild%282n%29%20%7B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%3B%0Abox%2Dsizing%3A%20content%2Dbox%3B%0Abackground%2Dcolor%3A%20%23fff%3B%0A%7D%0Acode%20%7B%0Apadding%3A%200%3B%0Apadding%2Dtop%3A%200%2E2em%3B%0Apadding%2Dbottom%3A%200%2E2em%3B%0Amargin%3A%200%3B%0Afont%2Dsize%3A%2085%25%3B%0Abackground%2Dcolor%3A%20rgba%280%2C0%2C0%2C0%2E04%29%3B%0Aborder%2Dradius%3A%203px%3B%0A%7D%0Acode%3Abefore%2C%0Acode%3Aafter%20%7B%0Aletter%2Dspacing%3A%20%2D0%2E2em%3B%0Acontent%3A%20%22%5C00a0%22%3B%0A%7D%0Apre%3Ecode%20%7B%0Apadding%3A%200%3B%0Amargin%3A%200%3B%0Afont%2Dsize%3A%20100%25%3B%0Aword%2Dbreak%3A%20normal%3B%0Awhite%2Dspace%3A%20pre%3B%0Abackground%3A%20transparent%3B%0Aborder%3A%200%3B%0A%7D%0A%2Ehighlight%20%7B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0A%2Ehighlight%20pre%2C%0Apre%20%7B%0Apadding%3A%2016px%3B%0Aoverflow%3A%20auto%3B%0Afont%2Dsize%3A%2085%25%3B%0Aline%2Dheight%3A%201%2E45%3B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0A%7D%0A%2Ehighlight%20pre%20%7B%0Amargin%2Dbottom%3A%200%3B%0Aword%2Dbreak%3A%20normal%3B%0A%7D%0Apre%20%7B%0Aword%2Dwrap%3A%20normal%3B%0A%7D%0Apre%20code%20%7B%0Adisplay%3A%20inline%3B%0Amax%2Dwidth%3A%20initial%3B%0Apadding%3A%200%3B%0Amargin%3A%200%3B%0Aoverflow%3A%20initial%3B%0Aline%2Dheight%3A%20inherit%3B%0Aword%2Dwrap%3A%20normal%3B%0Abackground%2Dcolor%3A%20transparent%3B%0Aborder%3A%200%3B%0A%7D%0Apre%20code%3Abefore%2C%0Apre%20code%3Aafter%20%7B%0Acontent%3A%20normal%3B%0A%7D%0Akbd%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%3A%203px%205px%3B%0Afont%2Dsize%3A%2011px%3B%0Aline%2Dheight%3A%2010px%3B%0Acolor%3A%20%23555%3B%0Avertical%2Dalign%3A%20middle%3B%0Abackground%2Dcolor%3A%20%23fcfcfc%3B%0Aborder%3A%20solid%201px%20%23ccc%3B%0Aborder%2Dbottom%2Dcolor%3A%20%23bbb%3B%0Aborder%2Dradius%3A%203px%3B%0Abox%2Dshadow%3A%20inset%200%20%2D1px%200%20%23bbb%3B%0A%7D%0A%2Epl%2Dc%20%7B%0Acolor%3A%20%23969896%3B%0A%7D%0A%2Epl%2Dc1%2C%0A%2Epl%2Ds%20%2Epl%2Dv%20%7B%0Acolor%3A%20%230086b3%3B%0A%7D%0A%2Epl%2De%2C%0A%2Epl%2Den%20%7B%0Acolor%3A%20%23795da3%3B%0A%7D%0A%2Epl%2Ds%20%2Epl%2Ds1%2C%0A%2Epl%2Dsmi%20%7B%0Acolor%3A%20%23333%3B%0A%7D%0A%2Epl%2Dent%20%7B%0Acolor%3A%20%2363a35c%3B%0A%7D%0A%2Epl%2Dk%20%7B%0Acolor%3A%20%23a71d5d%3B%0A%7D%0A%2Epl%2Dpds%2C%0A%2Epl%2Ds%2C%0A%2Epl%2Ds%20%2Epl%2Dpse%20%2Epl%2Ds1%2C%0A%2Epl%2Dsr%2C%0A%2Epl%2Dsr%20%2Epl%2Dcce%2C%0A%2Epl%2Dsr%20%2Epl%2Dsra%2C%0A%2Epl%2Dsr%20%2Epl%2Dsre%20%7B%0Acolor%3A%20%23183691%3B%0A%7D%0A%2Epl%2Dv%20%7B%0Acolor%3A%20%23ed6a43%3B%0A%7D%0A%2Epl%2Did%20%7B%0Acolor%3A%20%23b52a1d%3B%0A%7D%0A%2Epl%2Dii%20%7B%0Abackground%2Dcolor%3A%20%23b52a1d%3B%0Acolor%3A%20%23f8f8f8%3B%0A%7D%0A%2Epl%2Dsr%20%2Epl%2Dcce%20%7B%0Acolor%3A%20%2363a35c%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dml%20%7B%0Acolor%3A%20%23693a17%3B%0A%7D%0A%2Epl%2Dmh%2C%0A%2Epl%2Dmh%20%2Epl%2Den%2C%0A%2Epl%2Dms%20%7B%0Acolor%3A%20%231d3e81%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmq%20%7B%0Acolor%3A%20%23008080%3B%0A%7D%0A%2Epl%2Dmi%20%7B%0Acolor%3A%20%23333%3B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0A%2Epl%2Dmb%20%7B%0Acolor%3A%20%23333%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmd%20%7B%0Abackground%2Dcolor%3A%20%23ffecec%3B%0Acolor%3A%20%23bd2c00%3B%0A%7D%0A%2Epl%2Dmi1%20%7B%0Abackground%2Dcolor%3A%20%23eaffea%3B%0Acolor%3A%20%2355a532%3B%0A%7D%0A%2Epl%2Dmdr%20%7B%0Acolor%3A%20%23795da3%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmo%20%7B%0Acolor%3A%20%231d3e81%3B%0A%7D%0Akbd%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%3A%203px%205px%3B%0Afont%3A%2011px%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0Aline%2Dheight%3A%2010px%3B%0Acolor%3A%20%23555%3B%0Avertical%2Dalign%3A%20middle%3B%0Abackground%2Dcolor%3A%20%23fcfcfc%3B%0Aborder%3A%20solid%201px%20%23ccc%3B%0Aborder%2Dbottom%2Dcolor%3A%20%23bbb%3B%0Aborder%2Dradius%3A%203px%3B%0Abox%2Dshadow%3A%20inset%200%20%2D1px%200%20%23bbb%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%20%7B%0Alist%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%2B%2Etask%2Dlist%2Ditem%20%7B%0Amargin%2Dtop%3A%203px%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%20input%20%7B%0Amargin%3A%200%200%2E35em%200%2E25em%20%2D1%2E6em%3B%0Avertical%2Dalign%3A%20middle%3B%0A%7D%0A%3Achecked%2B%2Eradio%2Dlabel%20%7B%0Az%2Dindex%3A%201%3B%0Aposition%3A%20relative%3B%0Aborder%2Dcolor%3A%20%234078c0%3B%0A%7D%0Acode%20%3E%20%2Ekw%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%3E%20%2Edt%20%7B%20color%3A%20%23ed6a43%3B%20%7D%0Acode%20%3E%20%2Edv%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%3E%20%2Ebn%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%3E%20%2Efl%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%3E%20%2Ech%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%3E%20%2Est%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%3E%20%2Eco%20%7B%20color%3A%20%23969896%3B%20%7D%0Acode%20%3E%20%2Eot%20%7B%20color%3A%20%230086b3%3B%20%7D%0Acode%20%3E%20%2Eal%20%7B%20color%3A%20%23a61717%3B%20%7D%0Acode%20%3E%20%2Efu%20%7B%20color%3A%20%2363a35c%3B%20%7D%0Acode%20%3E%20%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%0Acode%20%3E%20%2Ewa%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%3E%20%2Ecn%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%3E%20%2Esc%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%3E%20%2Evs%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%3E%20%2Ess%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%3E%20%2Eim%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%3E%20%2Eva%20%7Bcolor%3A%20%23008080%3B%20%7D%0Acode%20%3E%20%2Ecf%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%3E%20%2Eop%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%3E%20%2Ebu%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%3E%20%2Eex%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%3E%20%2Epp%20%7B%20color%3A%20%23999999%3B%20%7D%0Acode%20%3E%20%2Eat%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%3E%20%2Edo%20%7B%20color%3A%20%23969896%3B%20%7D%0Acode%20%3E%20%2Ean%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%3E%20%2Ecv%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%3E%20%2Ein%20%7B%20color%3A%20%23008080%3B%20%7D%0A" rel="stylesheet">
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="inspecting-the-data">Inspecting the data</h1>
<p>Seth Mottaghinejad<br />
2017-01-31</p>
<p>With the data loaded in the R session, we are ready to inspect the data and write some basic queries against it. The goal of this chapter is to get a feel for the data. Any exploratory analysis often consists of the following steps:</p>
<ol>
<li>load all the data (and combine them if necessary)</li>
<li><strong>inspect the data in preparation cleaning it</strong></li>
<li>clean the data in preparation for analysis</li>
<li>add any interesting features or columns as far as they pertain to the analysis</li>
<li>find ways to analyze or summarize the data and report your findings</li>
</ol>
<p>We are now in step 2, where we intend to introduce some helpful R functions for inspecting the data and write some of our own.</p>
<p>Most of the time, the above steps are not clearly delineated from each other. For example, one could inspect certain columns of the data, clean them, build new features out of them, and then move on to other columns, thereby iterating on steps 2 through 4 until all the columns are dealt with. This approach is completely valid, but for the sake of teaching the course we prefer to show each step as distinct. Moreover, going over results and findings can often guide how data should be collected and processed in the future, so it is more accurate to present the above workflow as being circular, but once again for simplicity we assume a linear workflow.</p>
<h2 id="basic-queries">Basic queries</h2>
<p>Let's begin the data exploration. Each of the functions below return some useful information about the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(nyc_taxi) <span class="co"># show me the first few rows</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(nyc_taxi, <span class="dt">n =</span> <span class="dv">3</span>) <span class="co"># show me the first n rows</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(nyc_taxi) <span class="co"># show me the last few rows</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_info &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">class =</span> <span class="kw">class</span>(nyc_taxi), <span class="co"># shows the type of the data: `data.frame`</span>
  <span class="dt">type =</span> <span class="kw">typeof</span>(nyc_taxi), <span class="co"># shows that a `data.frame` is fundamentally a `list` object</span>
  <span class="dt">nrow =</span> <span class="kw">nrow</span>(nyc_taxi), <span class="co"># number of rows</span>
  <span class="dt">ncol =</span> <span class="kw">ncol</span>(nyc_taxi), <span class="co"># number of columns</span>
  <span class="dt">colnames =</span> <span class="kw">names</span>(nyc_taxi))

basic_info</code></pre></div>
<pre><code>## $class
## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;
## 
## $type
## [1] &quot;list&quot;
## 
## $nrow
## [1] 6000000
## 
## $ncol
## [1] 17
## 
## $colnames
##  [1] &quot;pickup_datetime&quot;       &quot;dropoff_datetime&quot;     
##  [3] &quot;passenger_count&quot;       &quot;trip_distance&quot;        
##  [5] &quot;pickup_longitude&quot;      &quot;pickup_latitude&quot;      
##  [7] &quot;rate_code_id&quot;          &quot;dropoff_longitude&quot;    
##  [9] &quot;dropoff_latitude&quot;      &quot;payment_type&quot;         
## [11] &quot;fare_amount&quot;           &quot;extra&quot;                
## [13] &quot;mta_tax&quot;               &quot;tip_amount&quot;           
## [15] &quot;tolls_amount&quot;          &quot;improvement_surcharge&quot;
## [17] &quot;total_amount&quot;</code></pre>
<p>We use <code>str</code> to look at column types in the data: the most common column types are <code>integer</code>, <code>numeric</code> (for floats), <code>character</code> (for strings), <code>factor</code> (for categorical data). Less common column types exist, such as date, time, and datetime formats.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(nyc_taxi)</code></pre></div>
<pre><code>## Classes 'tbl_df', 'tbl' and 'data.frame':    6000000 obs. of  17 variables:
##  $ pickup_datetime      : chr  &quot;2016-06-21 21:33:52&quot; &quot;2016-06-08 09:52:19&quot; &quot;2016-06-14 23:27:22&quot; &quot;2016-06-12 20:13:12&quot; ...
##  $ dropoff_datetime     : chr  &quot;2016-06-21 21:34:40&quot; &quot;2016-06-08 10:19:55&quot; &quot;2016-06-14 23:35:05&quot; &quot;2016-06-12 20:18:53&quot; ...
##  $ passenger_count      : int  5 1 1 5 3 1 1 2 1 1 ...
##  $ trip_distance        : num  0.4 5.2 2.1 2.23 2.72 1.3 8.94 0.87 1.6 2.43 ...
##  $ pickup_longitude     : num  -74 -74 -74 -74 -74 ...
##  $ pickup_latitude      : num  40.7 40.8 40.7 40.8 40.7 ...
##  $ rate_code_id         : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ dropoff_longitude    : num  -74 -74 -74 -74 -74 ...
##  $ dropoff_latitude     : num  40.7 40.8 40.7 40.8 40.7 ...
##  $ payment_type         : int  1 2 1 1 1 2 1 1 2 2 ...
##  $ fare_amount          : num  3 21.5 9 8 17 7.5 30.5 5 9.5 10.5 ...
##  $ extra                : num  0.5 0 0.5 0.5 0.5 1 0 0.5 0 0.5 ...
##  $ mta_tax              : num  0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ tip_amount           : num  0.86 0 1.5 2.79 3.66 0 7.37 1.7 0 0 ...
##  $ tolls_amount         : num  0 0 0 0 0 0 5.54 0 0 0 ...
##  $ improvement_surcharge: num  0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 ...
##  $ total_amount         : num  5.16 22.3 11.8 12.09 21.96 ...</code></pre>
<p>Now let's see how we can subset or slice the data: in other words. Since a <code>data.frame</code> is a 2-dimensional object, we can slice by asking for specific rows or columns of the data. The notation we use here (which we refer to as the <strong>bracket notation</strong>) is as follows:</p>
<pre><code>data[rows_to_slice, columns_to_slice]</code></pre>
<p>As we will see, we can be very flexible in what we choose for <code>rows_to_slice</code> and <code>columns_to_slice</code>. For example,</p>
<ul>
<li>we can provide numeric indexes corresponding to row numbers or column positions</li>
<li>we can (and should) specify the column names instead of column positions</li>
<li>we can provide functions that return integers corresponding to the row indexes we want to return</li>
<li>we can provide functions that return the column names we want to return</li>
<li>we can have conditional statements or functions that return <code>TRUE</code> and <code>FALSE</code> for each row or column, so that only cases that are <code>TRUE</code> are returned</li>
</ul>
<p>We will encounter examples for each case.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi[<span class="dv">1</span>:<span class="dv">5</span>, <span class="dv">1</span>:<span class="dv">4</span>] <span class="co"># rows 1 through 5, columns 1 through 4</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi[<span class="dv">1</span>:<span class="dv">5</span>, -(<span class="dv">1</span>:<span class="dv">4</span>)] <span class="co"># rows 1 through 5, except columns 1 through 4</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc.first.ten &lt;-<span class="st"> </span>nyc_taxi[<span class="dv">1</span>:<span class="dv">10</span>, ] <span class="co"># store the first 10 rows and all columns in a new `data.frame` called `nyc.first.ten`</span></code></pre></div>
<p>So far our data slices have been limited to adjacent rows and adjacent columns. Here's an example of how to slice the data for non-adjacent rows. It is also far more common to select columns by their names instead of their position (also called numeric index), since this makes the code more readable and won't break the code if column positions change.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">8</span>, <span class="dv">66</span>), <span class="kw">c</span>(<span class="st">&quot;fare_amount&quot;</span>, <span class="st">&quot;mta_tax&quot;</span>, <span class="st">&quot;tip_amount&quot;</span>, <span class="st">&quot;tolls_amount&quot;</span>)]</code></pre></div>
<h2 id="more-on-querying-data">More on querying data</h2>
<p>To query a single column of the data, we have two options:</p>
<ul>
<li>we can still use the bracket notation, namely <code>data[ , col_name]</code></li>
<li>we can use a list notation, namely <code>data$col_name</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi[<span class="dv">1</span>:<span class="dv">10</span>, <span class="st">&quot;fare_amount&quot;</span>]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi$fare_amount[<span class="dv">1</span>:<span class="dv">10</span>]</code></pre></div>
<pre><code>##  [1]  3.0 21.5  9.0  8.0 17.0  7.5 30.5  5.0  9.5 10.5</code></pre>
<p>Depending on the situation, one notation may be preferable to the other, as we will see.</p>
<p>So far we sliced the data at particular rows using the index of the row. A more common situation is one where we query the data for rows that meet a given condition. Multiple conditions can be combined using the <code>&amp;</code> (and) and <code>|</code> (or) operators.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(nyc_taxi[nyc_taxi$fare_amount &gt;<span class="st"> </span><span class="dv">350</span>, ]) <span class="co"># return the rows of the data where `fare_amount` exceeds 350</span></code></pre></div>
<p>We can use a function like <code>grep</code> to grab only columns that match a certain pattern, such as columns that have the word 'amount' in them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">amount_vars &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">'amount'</span>, <span class="kw">names</span>(nyc_taxi), <span class="dt">value =</span> <span class="ot">TRUE</span>)
nyc_taxi[nyc_taxi$fare_amount &gt;<span class="st"> </span><span class="dv">350</span> &amp;<span class="st"> </span>nyc_taxi$tip_amount &lt;<span class="st"> </span><span class="dv">10</span>, amount_vars]</code></pre></div>
<p>As these conditional statements become longer, it becomes increasingly tedious to write <code>nyc_taxi$</code> proir to the column name every time we refer to a column in the data. Note how leaving out <code>nyc_taxi$</code> by accident can result in an error:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi[nyc_taxi$fare_amount &gt;<span class="st"> </span><span class="dv">350</span> &amp;<span class="st"> </span>tip_amount &lt;<span class="st"> </span><span class="dv">10</span>, amount_vars]</code></pre></div>
<pre><code>## Error in lapply(x, `[`, i): object 'tip_amount' not found</code></pre>
<p>As the error suggests, R expected to find a stand-alone object called <code>tip_amount</code>, which doesn't exist. Instead, we meant to point to the column called <code>tip_amount</code> in the nyc_taxi dataset, in other words <code>nyc_taxi$tip_amount</code>. This error also suggests one dangerous pitfall: if we did have an object called <code>tip_amount</code> in our R session, we may have failed to notice the bug in the code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tip_amount &lt;-<span class="st"> </span><span class="dv">20</span> <span class="co"># this is the value that will be used to check the condition below</span>
amount_vars &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">'amount'</span>, <span class="kw">names</span>(nyc_taxi), <span class="dt">value =</span> <span class="ot">TRUE</span>)
nyc_taxi[nyc_taxi$fare_amount &gt;<span class="st"> </span><span class="dv">350</span> &amp;<span class="st"> </span>tip_amount &lt;<span class="st"> </span><span class="dv">10</span>, amount_vars] <span class="co"># since `20 &lt; 10` is FALSE, we return an empty data</span></code></pre></div>
<p>There are three ways to avoid such errors: (1) avoid having objects with the same name as column names in the data, (2) use the <code>with</code> function. With <code>with</code> we are explicitly telling R that the columns we reference are in <code>nyc_taxi</code>, this way we don't need to prefix the columns by <code>nyc_taxi$</code> anymore. Here's the above query rewritten using <code>with</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(nyc_taxi, nyc_taxi[fare_amount &gt;<span class="st"> </span><span class="dv">350</span> &amp;<span class="st"> </span>tip_amount &lt;<span class="st"> </span><span class="dv">10</span>, amount_vars])</code></pre></div>
<p>We can use <code>with</code> any time we need to reference multiple columns in the data, not just for slicing the data. In the specific case where we slice the data, there is another option: using the <code>subset</code> function. Just like <code>with</code>, <code>subset</code> takes in the data as its first input so we don't have to prefix column names with <code>nyc_taxi$</code>. We can also use the <code>select</code> argument to slice by columns. Let's contrast slicing the data using <code>subset</code> with the bracket notation:</p>
<ul>
<li>bracket notation: <code>data[rows_to_slice, columns_to_slice]</code></li>
<li>using <code>subset</code>: <code>subset(data, rows_to_slice, select = columns_to_slice)</code></li>
</ul>
<p>Here's what the above query would look like using <code>subset</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(nyc_taxi, fare_amount &gt;<span class="st"> </span><span class="dv">350</span> &amp;<span class="st"> </span>tip_amount &lt;<span class="st"> </span><span class="dv">10</span>, <span class="dt">select =</span> amount_vars)</code></pre></div>
<p>The <code>select</code> argument for <code>subset</code> allows us to select columns in a way that is not possible with the bracket notation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_small &lt;-<span class="st"> </span><span class="kw">subset</span>(nyc_taxi, fare_amount &gt;<span class="st"> </span><span class="dv">350</span> &amp;<span class="st"> </span>tip_amount &lt;<span class="st"> </span><span class="dv">10</span>,
  <span class="dt">select =</span> fare_amount:tip_amount) <span class="co"># return all columns between `fare_amount` and `tip_amount`</span>
<span class="kw">dim</span>(nyc_small)</code></pre></div>
<pre><code>## [1] 58  4</code></pre>
<h3 id="exercises">Exercises</h3>
<p>Here is an example of a useful new function: <code>seq</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">by =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<ol>
<li>Once you figure out what <code>seq</code> does, use it to take a sample of the data consisting of every 2500th rows. Such a sample is called a <strong>systematic sample</strong>.</li>
</ol>
<p>Here is another example of a useful function: <code>rep</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] 1 1 1 1</code></pre>
<p>What happens if the first argument to <code>rep</code> is a vector?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">1</span>:<span class="dv">2</span>, <span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] 1 2 1 2 1 2 1 2</code></pre>
<p>What happens if the second argument to <code>rep</code> is also a vector (of the same length)?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>))</code></pre></div>
<pre><code>## [1] 3 3 6 6 6 6 6</code></pre>
<ol>
<li><p>Create a new data object consisting of 5 copies of the first row of the data.</p></li>
<li><p>Create a new data object consisting of 5 copies of each of the first 10 rows of the data.</p></li>
<li><p>We learned to how to slice data using conditional statements. Note that in R, not all conditional statements have to involve columns in the data. Here's an example:</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(nyc_small, fare_amount &gt;<span class="st"> </span><span class="dv">100</span> &amp;<span class="st"> </span><span class="dv">1</span>:<span class="dv">2</span> &gt;<span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<p>See if you can describe what the above statement returns. Of course, just because we can do something in R doesn't mean that we should. Sometimes, we have to sacrifice a little bit of efficiency or conciseness for the sake of clarity. So reproduce the above subset in a way that makes the code more understandable. There is more than one way to do this, and you can break up the code in two steps instead of one if you want.</p>
<p>Here's another useful R function: <code>sample</code>. Run the below example multiple times to see the different samples being generated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">10</span>, <span class="dv">5</span>)</code></pre></div>
<pre><code>## [1]  5 10  3  2  4</code></pre>
<ol>
<li>Use <code>sample</code> to create random sample consisting of about 10 percent of the data. Store the result in a new data object called <code>nyc_sample</code>.</li>
</ol>
<p>There is another way to do what we just did (that does not involve the <code>sample</code> function). We start by creating a column <code>u</code> containing random uniform numbers between 0 and 1, which we can generate with the <code>runif</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi$u &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="kw">nrow</span>(nyc_taxi))</code></pre></div>
<ol>
<li><p>Recreate the same sample we had in the last exercise but use the column <code>u</code> instead.</p></li>
<li><p>You would probably argue that the second solution is easier. There is however an advantage to using the <code>sample</code> function: we can also do sampling <strong>with replacement</strong> with the <code>sample</code> function. First find the argument that allows sampling with replacement. Then use it to take a sample of size 1000 <em>with replacement</em> from the <code>nyc_taxi</code> data.</p></li>
</ol>
<h3 id="solutions">Solutions</h3>
<ol>
<li>We simply use the output of <code>seq</code> as indexes for selecting rows:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(nyc_taxi[<span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">nrow</span>(nyc_taxi), <span class="dv">2500</span>), ])</code></pre></div>
<p>Another approach we can take is to use the <strong>modulo operator</strong> (<code>%%</code>) in R, but a this approach is less efficient.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(nyc_taxi[<span class="dv">1</span>:<span class="kw">nrow</span>(nyc_taxi) %%<span class="st"> </span><span class="dv">2500</span> ==<span class="st"> </span><span class="dv">1</span>, ])</code></pre></div>
<ol>
<li>In this case, we are still using the same bracket notation, but this time return the first rows 5 times.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_taxi[<span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>), ]</code></pre></div>
<ol>
<li>This is akin to the last exercise, but this time we repeat <code>1:10</code> instead of just <code>1</code>. We use <code>head</code> here to only show the top 6 rows.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(nyc_taxi[<span class="kw">rep</span>(<span class="dv">1</span>:<span class="dv">10</span>, <span class="dv">5</span>), ])</code></pre></div>
<p>Notice the way that the row indexes appear in the results in each case. This can sometimes be an indication of how the data was sampled.</p>
<ol>
<li>As it turns out, the second condition makes it so that we skip every other row of the data, but we need to be familiar with vector operation in R to guess that and even then it is not immediately clear that is what's happening. So here's a better way of doing the same thing.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_small &lt;-<span class="st"> </span>nyc_small[<span class="kw">seq</span>(<span class="dv">2</span>, <span class="kw">nrow</span>(nyc_small), <span class="dt">by =</span> <span class="dv">2</span>), ] <span class="co"># take even-numbered rows</span>
<span class="kw">subset</span>(nyc_small, fare_amount &gt;<span class="st"> </span><span class="dv">100</span>)</code></pre></div>
<ol>
<li>Here's one way we can sample from the data.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_sample &lt;-<span class="st"> </span>nyc_taxi[<span class="kw">sample</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(nyc_taxi), <span class="kw">nrow</span>(nyc_taxi)/<span class="dv">10</span>) , ]</code></pre></div>
<ol>
<li>Here's a second way of doing it.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_sample &lt;-<span class="st"> </span><span class="kw">subset</span>(nyc_taxi, u &lt;<span class="st"> </span>.<span class="dv">1</span>)
nyc_taxi$u &lt;-<span class="st"> </span><span class="ot">NULL</span> <span class="co"># we can drop `u` now, since it is no longer needed</span></code></pre></div>
<ol>
<li>We can sample with replacement using the <code>replace = TRUE</code> argument in the <code>sample</code> function.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nyc_sample &lt;-<span class="st"> </span>nyc_taxi[<span class="kw">sample</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(nyc_taxi), <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>) , ]</code></pre></div>
<h2 id="basic-summaries">Basic summaries</h2>
<p>After <code>str</code>, <code>summary</code> is probably the most ubiquitous R function. It provides us with summary statistics of each of the columns in the data. The kind of summary statistics we see for a given column depends on the column type. Just like <code>str</code>, <code>summary</code> gives clues for how we need to clean the data. For example</p>
<ul>
<li><code>pickup_datetime</code> and <code>dropoff_datetime</code> should be <code>datetime</code> columns, not <code>character</code></li>
<li><code>rate_code_id</code> and <code>payment_type</code> should be a <code>factor</code>, not <code>character</code></li>
<li>the geographical coordinates for pick-up and drop-off occasionally fall outside a reasonable bound (probably due to error)</li>
<li><code>fare_amount</code> is sometimes negative (could be refunds, could be errors, could be something else)</li>
</ul>
<p>Once we clean the data (next chapter), we will rerun summary and notice how we see the appropriate summary statistics once the column have been converted to the right classes.</p>
<p>What if there are summaries we don't see? We can just write our own summary function, and here's an example. The <code>num.distinct</code> function will return the number of unique elements in a vector. Most of the work is done for us: the <code>unique</code> function returns the unique elements of a vector, and the <code>length</code> function counts how many there are. Notice how the function is commented with information about input types and output.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">num.distinct &lt;-<span class="st"> </span>function(x) {
<span class="co"># returns the number of distinct values of a vector `x`</span>
<span class="co"># `x` can be numeric (floats are not recommended) , character, logical, factor</span>
<span class="co"># to see why floats are a bad idea try this:</span>
<span class="co"># unique(c(.3, .4 - .1, .5 - .2, .6 - .3, .7 - .4))</span>
  <span class="kw">length</span>(<span class="kw">unique</span>(x))
}</code></pre></div>
<p>It's usually a good idea to test the function with some random inputs before we test it on the larger data. We should also test the function on 'unusual' inputs to see if it does what we expect from it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">num.distinct</span>(<span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">9</span>))</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">num.distinct</span>(<span class="dv">1</span>) <span class="co"># test the function on a singleton (a vector of length 1)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">num.distinct</span>(<span class="kw">c</span>()) <span class="co"># test the function on an empty vector</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">num.distinct</span>(<span class="kw">c</span>(<span class="dv">23</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="ot">NA</span>, <span class="dv">11</span>, <span class="dv">11</span>)) <span class="co"># test the function on a vector with NAs</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Now we can test the function on the data, for example on <code>pickup_longitude</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">num.distinct</span>(nyc_taxi$pickup_longitude) <span class="co"># check it on a single variable in our data</span></code></pre></div>
<pre><code>## [1] 31159</code></pre>
<p>But what if we wanted to run the function on all the columns in the data at once? We could write a loop, but instead we show you the <code>sapply</code> function, which accomplishes the same thing in a more succint and R-like manner. With <code>sapply</code>, we pass the data as the first argument, and some function (usually a summary function) as the second argument: <code>sapply</code> will run the function on each column of the data (or those columns of the data for which the summary function is relevant).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(nyc_taxi, num.distinct) <span class="co"># apply it to each variable in the data</span></code></pre></div>
<pre><code>##       pickup_datetime      dropoff_datetime       passenger_count 
##               4819099               4818764                    10 
##         trip_distance      pickup_longitude       pickup_latitude 
##                  4035                 31159                 56804 
##          rate_code_id     dropoff_longitude      dropoff_latitude 
##                     7                 47211                 80240 
##          payment_type           fare_amount                 extra 
##                     5                  1524                    40 
##               mta_tax            tip_amount          tolls_amount 
##                    15                  3100                   716 
## improvement_surcharge          total_amount 
##                     8                  9541</code></pre>
<p>Any secondary argument to the summary function can be passed along to <code>sapply</code>. This feature makes <code>sapply</code> (and other similar functions) very powerful. For example, the <code>mean</code> function has an argument called <code>na.rm</code> for removing missing values. By default, <code>na.rm</code> is set to <code>FALSE</code> and unless <code>na.rm = TRUE</code> the function will return <code>NA</code> if there is any missing value in the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(nyc_taxi, mean) <span class="co"># returns the average of all columns in the data</span></code></pre></div>
<pre><code>##       pickup_datetime      dropoff_datetime       passenger_count 
##                    NA                    NA                 1.661 
##         trip_distance      pickup_longitude       pickup_latitude 
##                 3.805               -72.918                40.169 
##          rate_code_id     dropoff_longitude      dropoff_latitude 
##                    NA               -72.981                40.205 
##          payment_type           fare_amount                 extra 
##                    NA                12.985                 0.333 
##               mta_tax            tip_amount          tolls_amount 
##                 0.497                 1.802                 0.315 
## improvement_surcharge          total_amount 
##                 0.300                16.233</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(nyc_taxi, mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="co"># returns the average of all columns in the data after removing NAs</span></code></pre></div>
<pre><code>##       pickup_datetime      dropoff_datetime       passenger_count 
##                    NA                    NA                 1.661 
##         trip_distance      pickup_longitude       pickup_latitude 
##                 3.805               -72.918                40.169 
##          rate_code_id     dropoff_longitude      dropoff_latitude 
##                 1.039               -72.981                40.205 
##          payment_type           fare_amount                 extra 
##                 1.343                12.985                 0.333 
##               mta_tax            tip_amount          tolls_amount 
##                 0.497                 1.802                 0.315 
## improvement_surcharge          total_amount 
##                 0.300                16.233</code></pre>
<h3 id="exercises-1">Exercises</h3>
<p>Let's return to the <code>num.distinct</code> function we created earlier. The comment inside the function indicated that we should be careful about using it with a non-integer <code>numeric</code> input (a float). The problem lies with how <code>unique</code> handles such inputs. Here's an example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(<span class="kw">c</span>(.<span class="dv">3</span>, .<span class="dv">4</span> -<span class="st"> </span>.<span class="dv">1</span>, .<span class="dv">5</span> -<span class="st"> </span>.<span class="dv">2</span>, .<span class="dv">6</span> -<span class="st"> </span>.<span class="dv">3</span>, .<span class="dv">7</span> -<span class="st"> </span>.<span class="dv">4</span>)) <span class="co"># what happened?</span></code></pre></div>
<pre><code>## [1] 0.3 0.3 0.3</code></pre>
<p>Generally, to check for equality between two numeric value (or two numeric columns), we need to be more careful.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">.<span class="dv">3</span> ==<span class="st"> </span>.<span class="dv">4</span> -<span class="st"> </span>.<span class="dv">1</span> <span class="co"># returns unexpected result</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>The right way to check if two real numbers are equal is to see if their difference is below a certain threshold.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">abs</span>(.<span class="dv">3</span> -<span class="st"> </span>(.<span class="dv">4</span> -<span class="st"> </span>.<span class="dv">1</span>)) &lt;<span class="st"> </span>.<span class="dv">0000001</span> <span class="co"># the right way of doing it</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Another more convenient way to check equality between two real numbers is by using the <code>all.equal</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(.<span class="dv">3</span>, .<span class="dv">4</span> -<span class="st"> </span>.<span class="dv">1</span>) <span class="co"># another way of doing it</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<ol>
<li><p>Use <code>all.equal</code> to determine if <code>total_amount</code> is equal to the sum of <code>fare_amount</code>, <code>extra</code>, <code>mta_tax</code>, <code>tip_amount</code>, <code>tolls_amount</code>, and <code>improvement_surcharge</code>.</p></li>
<li><p>What are some other ways we could check (not necessarily exact) equality between two numeric variables?</p></li>
</ol>
<h3 id="solutions-1">Solutions</h3>
<ol>
<li>We can pass the two columns (vectors) directly to <code>all.equal</code> to check if they are the same, but the second column needs to be computed on the fly.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(nyc_taxi,
  <span class="kw">all.equal</span>(total_amount,
    fare_amount +<span class="st"> </span>extra +<span class="st"> </span>mta_tax +<span class="st"> </span>tip_amount +<span class="st"> </span>tolls_amount +<span class="st"> </span>improvement_surcharge)
  )</code></pre></div>
<pre><code>## [1] &quot;Mean relative difference: 0.00024&quot;</code></pre>
<ol>
<li>Another way to check for equality is by looking at correlation. Two identical columns of <code>numeric</code> type will have a correlation of 1.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(nyc_taxi,
  <span class="kw">cor</span>(total_amount, <span class="co"># we could use correlation instead of `all.equal`</span>
    fare_amount +<span class="st"> </span>extra +<span class="st"> </span>mta_tax +<span class="st"> </span>tip_amount +<span class="st"> </span>tolls_amount +<span class="st"> </span>improvement_surcharge)
  )</code></pre></div>
<pre><code>## [1] 1</code></pre>

</body>
</html>
